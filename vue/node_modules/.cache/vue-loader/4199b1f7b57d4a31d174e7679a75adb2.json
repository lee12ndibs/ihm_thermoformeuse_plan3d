{"remainingRequest":"/home/jocelyn/Documents/Projettest/Projetv2/Thermoformeuse/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jocelyn/Documents/Projettest/Projetv2/Thermoformeuse/vue/src/components/Graphe.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jocelyn/Documents/Projettest/Projetv2/Thermoformeuse/vue/src/components/Graphe.vue","mtime":1583845381502},{"path":"/home/jocelyn/Documents/Projettest/Projetv2/Thermoformeuse/vue/node_modules/cache-loader/dist/cjs.js","mtime":1583835485378},{"path":"/home/jocelyn/Documents/Projettest/Projetv2/Thermoformeuse/vue/node_modules/thread-loader/dist/cjs.js","mtime":1583835488766},{"path":"/home/jocelyn/Documents/Projettest/Projetv2/Thermoformeuse/vue/node_modules/babel-loader/lib/index.js","mtime":1583835485310},{"path":"/home/jocelyn/Documents/Projettest/Projetv2/Thermoformeuse/vue/node_modules/vuetify-loader/lib/loader.js","mtime":1583835489018},{"path":"/home/jocelyn/Documents/Projettest/Projetv2/Thermoformeuse/vue/node_modules/cache-loader/dist/cjs.js","mtime":1583835485378},{"path":"/home/jocelyn/Documents/Projettest/Projetv2/Thermoformeuse/vue/node_modules/vue-loader/lib/index.js","mtime":1583835488874}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd2dWUtbGluZS1jaGFydCcsCiAgZGF0YTogKCkgPT4gKHsKICAgICAgZGF0YTogWzMwMCwgMTA4LCAyODAsIDE3MCwgMjMwLCAyNDJdLAogICAgICB0aW1lcjogdW5kZWZpbmVkLAogICAgICBuYl96b25lczogdW5kZWZpbmVkLAogICAgICB0ZW1wX3NldWlsczogWzMwMCwgMjAwLCAzMDAsIDMwMCwgMzAwLCAyNTBdLAogICAgICBtYXJnZVg6IDMwLAogICAgICBtYXJnZVk6IDIwLAogICAgICBMYXJnZXVyX2dyYXBoZTogdW5kZWZpbmVkLAogICAgICBIYXV0ZXVyX2dyYXBoZTogdW5kZWZpbmVkLAogICAgICBFc3BhY2VtZW50X2JhcnJlczogMTAsCiAgICAgIExhcmdldXJfYmFycmVzOiB1bmRlZmluZWQsCiAgICAgIHRhYl96b25lczogdW5kZWZpbmVkLAogICAgICBBeGVYOiB1bmRlZmluZWQsCiAgICAgIEF4ZVk6IHVuZGVmaW5lZCwKICAgICAgc3ZnOiB1bmRlZmluZWQsCiAgICAgIHRlbXBfb2s6IHVuZGVmaW5lZCwKICAgICAgdGVtcF9wYXNfb2s6IHVuZGVmaW5lZCwKICAgICAgLy8gbGluZTogJycsCiAgICB9KSwKICBtb3VudGVkKCkgewogICAgdGhpcy5uYl96b25lcyA9IHRoaXMuZGF0YS5sZW5ndGg7CiAgICB0aGlzLkxhcmdldXJfZ3JhcGhlID0gdGhpcy5uYl96b25lcyoxMDAgKyB0aGlzLm1hcmdlWDsKICAgIHRoaXMuSGF1dGV1cl9ncmFwaGUgPSBkMy5tYXgodGhpcy50ZW1wX3NldWlscykgKyAxMDA7CiAgICAvLyBjb25zb2xlLmxvZygiYSIpOwogICAgdGhpcy5MYXJnZXVyX2JhcnJlcyA9IHRoaXMuTGFyZ2V1cl9ncmFwaGUvdGhpcy5uYl96b25lczsKICAgIHRoaXMudGFiX3pvbmVzID0gdGhpcy5jcmVlcl90YWJfem9uZXMoKTsKICAgIHRoaXMuY3JlYXRlR3JhcGgoKTsKICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCh0aGlzLmNoYW5nZURhdGEsIDEwMDApOwogIH0sCiAgZGVzdHJveWVkOiBmdW5jdGlvbigpewogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICB9LAogIHdhdGNoOnsKICAgIGRhdGE6IGZ1bmN0aW9uKCl7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdhJyk7CiAgICAgIC8vIHRoaXMuY3JlYXRlR3JhcGgoKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFuZ2VEYXRhKCl7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJvayIpOwogICAgICAvLyBmb3IgKGxldCBpID0gMDsgaTx0aGlzLmRhdGEubGVuZ3RoOyBpKyspewogICAgICAvLyAgIHRoaXMuZGF0YVtpXSA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMDApICsgMTAwKTsKICAgICAgLy8gfQogICAgICBsZXQgZGF0YV90b19zZW5kID0geyJ0eXBlIjogImdldCJ9OwogICAgICBsZXQgaGVhZGVycyA9IHsnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLAogICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdQT1NULCBHRVQsIFBVVCwgT1BUSU9OUywgREVMRVRFJywKICAgICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcywgQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luLCBPcmlnaW4sIEFjY2VwdCwgQ29udGVudC1UeXBlJywKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJwp9CgogICAgICBmZXRjaCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL3RlbXBlcmF0dXJlIiwgewogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGhlYWRlcnMsCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YV90b19zZW5kKQoKICAgICAgfSkKICAgICAgLnRoZW4ocmVzPT4gcmVzLmpzb24oKSkKICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgICB9KTsKCgogICAgfSwKICAgIGNyZWVyX3RhYl96b25lcygpewogICAgICB2YXIgdGFiID0gW107CiAgICAgIGZvcih2YXIgaSA9IDE7IGkgPD0gdGhpcy5uYl96b25lczsgaSsrKXsKICAgICAgICB0YWIucHVzaCgiem9uZSAiICsgaSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRhYjsKICAgIH0sCiAgICBjcmVhdGVHcmFwaCgpewogICAgICB2YXIgc3ZnID0gdGhpcy5zdmc7CiAgICAgIHZhciBMYXJnZXVyX2JhcnJlcyA9IHRoaXMuTGFyZ2V1cl9iYXJyZXM7CiAgICAgIHZhciBMYXJnZXVyX2dyYXBoZSA9IHRoaXMuTGFyZ2V1cl9ncmFwaGU7CiAgICAgIHZhciBtYXJnZVggPSB0aGlzLm1hcmdlWDsKICAgICAgdmFyIEhhdXRldXJfZ3JhcGhlID0gdGhpcy5IYXV0ZXVyX2dyYXBoZTsKICAgICAgdmFyIG1hcmdlWSA9IHRoaXMubWFyZ2VZOwogICAgICB2YXIgQXhlWCA9IHRoaXMuQXhlWDsKICAgICAgdmFyIEF4ZVkgPSB0aGlzLkF4ZVk7CiAgICAgIHZhciBFc3BhY2VtZW50X2JhcnJlcyA9IHRoaXMuRXNwYWNlbWVudF9iYXJyZXM7CgogICAgICBBeGVZID0gZDMuc2NhbGVMaW5lYXIoKQogICAgICAuZG9tYWluKFtIYXV0ZXVyX2dyYXBoZSwwXSkKICAgICAgLnJhbmdlKFswLEhhdXRldXJfZ3JhcGhlXSk7CgoKICAgICAgQXhlWCA9IGQzLnNjYWxlQmFuZCgpCiAgICAgICAgICAuZG9tYWluKHRoaXMudGFiX3pvbmVzKQogICAgICAgICAgLnJhbmdlKFswLExhcmdldXJfZ3JhcGhlXSk7CiAgICAgIHN2ZyA9IGQzLnNlbGVjdCgnc3ZnJykKICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIExhcmdldXJfZ3JhcGhlK21hcmdlWCkKICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBIYXV0ZXVyX2dyYXBoZSk7CiAgICAgIHRoaXMudGVtcF9vayA9IHRoaXMudGVtcF9ibGV1ZXMoKTsKICAgICAgdGhpcy50ZW1wX3Bhc19vayA9IHRoaXMudGVtcF9yb3VnZXMoKTsKICAgICAgc3ZnCiAgICAgIC5hcHBlbmQoImciKQogICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiK21hcmdlWCsiLCIrIC1tYXJnZVkgKyIpIikKICAgICAgLmNhbGwoZDMuYXhpc0xlZnQoQXhlWSkpOwoKICAgICAgc3ZnCiAgICAgIC5hcHBlbmQoImciKQogICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiKyBtYXJnZVggKyIsIisoSGF1dGV1cl9ncmFwaGUtbWFyZ2VZKSsiKSIpCiAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oQXhlWCkpOwoKICAgICAgc3ZnLnNlbGVjdEFsbCgicmVjdCIpCiAgICAgICAgICAuZGF0YSh0aGlzLnRlbXBfcGFzX29rKQogICAgICAgICAgLmVudGVyKCkKICAgICAgICAgIC5hcHBlbmQoInJlY3QiKQogICAgICAgICAgLmF0dHIoImZpbGwiLCAicmVkIikKICAgICAgICAgIC5hdHRyKCJ5IiwgZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICByZXR1cm4gSGF1dGV1cl9ncmFwaGUgLSBkOwogICAgICAgICAgfSkKICAgICAgICAgIC5hdHRyKCJ4IiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgcmV0dXJuIEVzcGFjZW1lbnRfYmFycmVzOwogICAgICAgICAgfSkKICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgICB9KQogICAgICAgICAgLmF0dHIoIndpZHRoIiwgTGFyZ2V1cl9iYXJyZXMgLSBFc3BhY2VtZW50X2JhcnJlcykKICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSBbKExhcmdldXJfYmFycmVzICogaSkgKyBtYXJnZVgsIC1tYXJnZVldOwogICAgICAgICAgICAgIHJldHVybiAidHJhbnNsYXRlKCIrIHRyYW5zbGF0ZSArIikiOwogICAgICAgICAgfSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudGVtcF9vayk7CgogICAgICBzdmcuc2VsZWN0QWxsKCJncmFwaGVfcm91Z2UiKQogICAgICAgIC5kYXRhKHRoaXMudGVtcF9vaykKICAgICAgICAuZW50ZXIoKQogICAgICAgIC5hcHBlbmQoInJlY3QiKQogICAgICAgIC5hdHRyKCJmaWxsIiwgInN0ZWVsYmx1ZSIpCiAgICAgICAgLmF0dHIoInkiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICByZXR1cm4gSGF1dGV1cl9ncmFwaGUgLSBkOwogICAgICAgIH0pCiAgICAgICAgLmF0dHIoIngiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIEVzcGFjZW1lbnRfYmFycmVzOwogICAgICAgIH0pCiAgICAgICAgLmF0dHIoImhlaWdodCIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgfSkKICAgICAgICAuYXR0cigid2lkdGgiLCBMYXJnZXVyX2JhcnJlcyAtIEVzcGFjZW1lbnRfYmFycmVzKQogICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICB2YXIgdHJhbnNsYXRlID0gWyhMYXJnZXVyX2JhcnJlcyAqIGkpICsgbWFyZ2VYLCAtbWFyZ2VZXTsKICAgICAgICAgICAgcmV0dXJuICJ0cmFuc2xhdGUoIisgdHJhbnNsYXRlICsiKSI7CiAgICAgIH0pOwogICAgfSwKICAgIHRlbXBfYmxldWVzKCl7CiAgICB2YXIgdGFiID0gW107CiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5uYl96b25lczsgaSsrKXsKICAgICAgICBpZih0aGlzLmRhdGFbaV0gPD0gdGhpcy50ZW1wX3NldWlsc1tpXSl7CiAgICAgICAgICAgIHRhYi5wdXNoKHRoaXMuZGF0YVtpXSk7CiAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICAgIHRhYi5wdXNoKHRoaXMudGVtcF9zZXVpbHNbaV0pOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiB0YWI7CiAgICB9LAogICAgdGVtcF9yb3VnZXMoKXsKICAgICAgdmFyIHRhYiA9IFtdOwogICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5uYl96b25lczsgaSsrKXsKICAgICAgICAgIGlmKHRoaXMuZGF0YVtpXSA+IHRoaXMudGVtcF9zZXVpbHNbaV0pewogICAgICAgICAgICAgIHRhYi5wdXNoKHRoaXMuZGF0YVtpXSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlewogICAgICAgICAgICAgIHRhYi5wdXNoKDApOwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0YWI7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Graphe.vue"],"names":[],"mappings":";;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Graphe.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <svg>\n  </svg>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nexport default {\n  name: 'vue-line-chart',\n  data: () => ({\n      data: [300, 108, 280, 170, 230, 242],\n      timer: undefined,\n      nb_zones: undefined,\n      temp_seuils: [300, 200, 300, 300, 300, 250],\n      margeX: 30,\n      margeY: 20,\n      Largeur_graphe: undefined,\n      Hauteur_graphe: undefined,\n      Espacement_barres: 10,\n      Largeur_barres: undefined,\n      tab_zones: undefined,\n      AxeX: undefined,\n      AxeY: undefined,\n      svg: undefined,\n      temp_ok: undefined,\n      temp_pas_ok: undefined,\n      // line: '',\n    }),\n  mounted() {\n    this.nb_zones = this.data.length;\n    this.Largeur_graphe = this.nb_zones*100 + this.margeX;\n    this.Hauteur_graphe = d3.max(this.temp_seuils) + 100;\n    // console.log(\"a\");\n    this.Largeur_barres = this.Largeur_graphe/this.nb_zones;\n    this.tab_zones = this.creer_tab_zones();\n    this.createGraph();\n    this.timer = setInterval(this.changeData, 1000);\n  },\n  destroyed: function(){\n    clearInterval(this.timer);\n  },\n  watch:{\n    data: function(){\n      // console.log('a');\n      // this.createGraph();\n    },\n  },\n  methods: {\n    changeData(){\n      // console.log(\"ok\");\n      // for (let i = 0; i<this.data.length; i++){\n      //   this.data[i] = Math.floor((Math.random() * 100) + 100);\n      // }\n      let data_to_send = {\"type\": \"get\"};\n      let headers = {'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Methods': 'POST, GET, PUT, OPTIONS, DELETE',\n            'Access-Control-Allow-Headers': 'Access-Control-Allow-Methods, Access-Control-Allow-Origin, Origin, Accept, Content-Type',\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n}\n\n      fetch(\"http://localhost:3000/temperature\", {\n        method: 'post',\n        headers,\n        body: JSON.stringify(data_to_send)\n\n      })\n      .then(res=> res.json())\n      .then(data => {\n        console.log(JSON.stringify(data));\n      });\n\n\n    },\n    creer_tab_zones(){\n      var tab = [];\n      for(var i = 1; i <= this.nb_zones; i++){\n        tab.push(\"zone \" + i);\n      }\n      return tab;\n    },\n    createGraph(){\n      var svg = this.svg;\n      var Largeur_barres = this.Largeur_barres;\n      var Largeur_graphe = this.Largeur_graphe;\n      var margeX = this.margeX;\n      var Hauteur_graphe = this.Hauteur_graphe;\n      var margeY = this.margeY;\n      var AxeX = this.AxeX;\n      var AxeY = this.AxeY;\n      var Espacement_barres = this.Espacement_barres;\n\n      AxeY = d3.scaleLinear()\n      .domain([Hauteur_graphe,0])\n      .range([0,Hauteur_graphe]);\n\n\n      AxeX = d3.scaleBand()\n          .domain(this.tab_zones)\n          .range([0,Largeur_graphe]);\n      svg = d3.select('svg')\n          .attr(\"width\", Largeur_graphe+margeX)\n          .attr(\"height\", Hauteur_graphe);\n      this.temp_ok = this.temp_bleues();\n      this.temp_pas_ok = this.temp_rouges();\n      svg\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\"+margeX+\",\"+ -margeY +\")\")\n      .call(d3.axisLeft(AxeY));\n\n      svg\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\"+ margeX +\",\"+(Hauteur_graphe-margeY)+\")\")\n      .call(d3.axisBottom(AxeX));\n\n      svg.selectAll(\"rect\")\n          .data(this.temp_pas_ok)\n          .enter()\n          .append(\"rect\")\n          .attr(\"fill\", \"red\")\n          .attr(\"y\", function(d) {\n               return Hauteur_graphe - d;\n          })\n          .attr(\"x\", function() {\n              return Espacement_barres;\n          })\n          .attr(\"height\", function(d) {\n              return d;\n          })\n          .attr(\"width\", Largeur_barres - Espacement_barres)\n          .attr(\"transform\", function (d, i) {\n              var translate = [(Largeur_barres * i) + margeX, -margeY];\n              return \"translate(\"+ translate +\")\";\n          });\n      // console.log(this.temp_ok);\n\n      svg.selectAll(\"graphe_rouge\")\n        .data(this.temp_ok)\n        .enter()\n        .append(\"rect\")\n        .attr(\"fill\", \"steelblue\")\n        .attr(\"y\", function(d) {\n             return Hauteur_graphe - d;\n        })\n        .attr(\"x\", function() {\n            return Espacement_barres;\n        })\n        .attr(\"height\", function(d) {\n            return d;\n        })\n        .attr(\"width\", Largeur_barres - Espacement_barres)\n        .attr(\"transform\", function (d, i) {\n            var translate = [(Largeur_barres * i) + margeX, -margeY];\n            return \"translate(\"+ translate +\")\";\n      });\n    },\n    temp_bleues(){\n    var tab = [];\n    for(var i = 0; i < this.nb_zones; i++){\n        if(this.data[i] <= this.temp_seuils[i]){\n            tab.push(this.data[i]);\n        }\n        else{\n            tab.push(this.temp_seuils[i]);\n        }\n    }\n    return tab;\n    },\n    temp_rouges(){\n      var tab = [];\n      for(var i = 0; i < this.nb_zones; i++){\n          if(this.data[i] > this.temp_seuils[i]){\n              tab.push(this.data[i]);\n          }\n          else{\n              tab.push(0);\n          }\n      }\n      return tab;\n    },\n  },\n};\n</script>\n\n<style scoped>\n  svg{\n    margin: 25px;\n  }\n  path{\n    fill: none;\n    stroke: #76BF8A;\n    stroke-width: 3px;\n  }\n</style>\n"]}]}