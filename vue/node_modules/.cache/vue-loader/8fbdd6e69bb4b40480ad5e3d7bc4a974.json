{"remainingRequest":"/media/lee12/Data/cours/Sup'Galilée/Niveau II/Projet/Thermoformeuse/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/lee12/Data/cours/Sup'Galilée/Niveau II/Projet/Thermoformeuse/vue/src/components/Graphe.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/lee12/Data/cours/Sup'Galilée/Niveau II/Projet/Thermoformeuse/vue/src/components/Graphe.vue","mtime":1584212624221},{"path":"/media/lee12/Data/cours/Sup'Galilée/Niveau II/Projet/Thermoformeuse/vue/node_modules/cache-loader/dist/cjs.js","mtime":1583847268784},{"path":"/media/lee12/Data/cours/Sup'Galilée/Niveau II/Projet/Thermoformeuse/vue/node_modules/babel-loader/lib/index.js","mtime":1583847268349},{"path":"/media/lee12/Data/cours/Sup'Galilée/Niveau II/Projet/Thermoformeuse/vue/node_modules/vuetify-loader/lib/loader.js","mtime":1583847286507},{"path":"/media/lee12/Data/cours/Sup'Galilée/Niveau II/Projet/Thermoformeuse/vue/node_modules/cache-loader/dist/cjs.js","mtime":1583847268784},{"path":"/media/lee12/Data/cours/Sup'Galilée/Niveau II/Projet/Thermoformeuse/vue/node_modules/vue-loader/lib/index.js","mtime":1583847286091}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd2dWUtbGluZS1jaGFydCcsCiAgZGF0YTogKCkgPT4gKHsKICAgICAgZGF0YTogWzMwMCwgMTA4LCAyODAsIDE3MCwgMjMwLCAyNDJdLAogICAgICB0aW1lcjogdW5kZWZpbmVkLAogICAgICBuYl96b25lczogdW5kZWZpbmVkLAogICAgICB0ZW1wX3NldWlsczogWzIwMCwgMjAwLCAyMDAsIDIwMCwgMjAwLCAyMDBdLAogICAgICBtYXJnZVg6IDMwLAogICAgICBtYXJnZVk6IDIwLAogICAgICBMYXJnZXVyX2dyYXBoZTogdW5kZWZpbmVkLAogICAgICBIYXV0ZXVyX2dyYXBoZTogdW5kZWZpbmVkLAogICAgICBFc3BhY2VtZW50X2JhcnJlczogMTAsCiAgICAgIExhcmdldXJfYmFycmVzOiB1bmRlZmluZWQsCiAgICAgIHRhYl96b25lczogWyJaMSIsICJaMiIsICJaMyIsICJaNCIsICJaNSIsICJaNiJdLAogICAgICAvLyBsaW5lOiAnJywKICAgIH0pLAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLm5iX3pvbmVzID0gdGhpcy5kYXRhLmxlbmd0aDsKICAgIHRoaXMuTGFyZ2V1cl9ncmFwaGUgPSB0aGlzLm5iX3pvbmVzKjEwMCArIHRoaXMubWFyZ2VYOwogICAgdGhpcy5IYXV0ZXVyX2dyYXBoZSA9IGQzLm1heCh0aGlzLnRlbXBfc2V1aWxzKSArIDEwMDsKICAgIHRoaXMuTGFyZ2V1cl9iYXJyZXMgPSB0aGlzLkxhcmdldXJfZ3JhcGhlL3RoaXMubmJfem9uZXM7CiAgICAvLyB0aGlzLnRhYl96b25lcyA9IHRoaXMuY3JlZXJfdGFiX3pvbmVzKCk7CiAgICB0aGlzLmRlc3NpbmVyX2hpc3RvZ3JhbW1lKCk7CiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwodGhpcy5jaGFuZ2VEYXRhLCAxMDAwKTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24oKXsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgfSwKICB3YXRjaDp7CiAgICBkYXRhOiBmdW5jdGlvbigpewogICAgICAvLyBjb25zb2xlLmxvZygnYScpOwogICAgICAvLyB0aGlzLmNyZWF0ZUdyYXBoKCk7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlRGF0YSgpewogICAgICAKICAgICAgbGV0IGRhdGFfdG9fc2VuZCA9IFsiZ2V0X3RlbXBlcmF0dXJlIl07CiAgICAgIGxldCBoZWFkZXJzID0geydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsCiAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ1BPU1QsIEdFVCwgUFVULCBPUFRJT05TLCBERUxFVEUnLAogICAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzLCBBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4sIE9yaWdpbiwgQWNjZXB0LCBDb250ZW50LVR5cGUnLAogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICB9CiAgICAgIGZldGNoKCJodHRwOi8vbG9jYWxob3N0OjMwMDAiLCB7CiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgaGVhZGVycywKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhX3RvX3NlbmQpCgogICAgICB9KQogICAgICAudGhlbihyZXM9PiByZXMuanNvbigpKQogICAgICAudGhlbihkYXRhID0+IHsKICAgICAgICB0aGlzLmRhdGEgPSBkYXRhWzFdLnpvbmVfY2hhdWZmZTsKICAgICAgfSk7CgoKICAgIH0sCiAgICBkZXNzaW5lcl9oaXN0b2dyYW1tZSgpewogICAgICB2YXIgbmJfem9uZXMgPSB0aGlzLmRhdGEubGVuZ3RoOwogICAgICB2YXIgbWFyZ2VYID0gdGhpcy5tYXJnZVg7CiAgICAgIHZhciBtYXJnZVkgPSB0aGlzLm1hcmdlWTsKICAgICAgdmFyIExhcmdldXJfZ3JhcGhlID0gbmJfem9uZXMqdGhpcy5MYXJnZXVyX2JhcnJlcyArIG1hcmdlWDsKICAgICAgdmFyIEhhdXRldXJfZ3JhcGhlID0gZDMubWF4KHRoaXMudGVtcF9zZXVpbHMpKjEuNSArIG1hcmdlWTsKICAgICAgdmFyIEVzcGFjZW1lbnRfYmFycmVzID0gdGhpcy5Fc3BhY2VtZW50X2JhcnJlczsKICAgICAgdmFyIExhcmdldXJfYmFycmVzID0gKExhcmdldXJfZ3JhcGhlIC8gbmJfem9uZXMpOwoKICAgICAgdmFyIHRhYl96b25lcyA9IHRoaXMudGFiX3pvbmVzOwoKICAgICAgdmFyIEF4ZVkgPSBkMy5zY2FsZUxpbmVhcigpCiAgICAgICAgICAuZG9tYWluKFtIYXV0ZXVyX2dyYXBoZSwwXSkKICAgICAgICAgIC5yYW5nZShbMCxIYXV0ZXVyX2dyYXBoZV0pCgogICAgICB2YXIgQXhlWCA9IGQzLnNjYWxlQmFuZCgpCiAgICAgICAgICAuZG9tYWluKHRhYl96b25lcykKICAgICAgICAgIC5yYW5nZShbMCxMYXJnZXVyX2dyYXBoZV0pCgogICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KCcjaGlzdG9ncmFtbWVfdGVtcCcpCiAgICAgICAgICAuYXR0cigid2lkdGgiLCBMYXJnZXVyX2dyYXBoZSttYXJnZVgpCiAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgSGF1dGV1cl9ncmFwaGUpOwoKICAgICAgdmFyIHRlbXBfb2sgPSB0aGlzLnRlbXBfYmxldWVzKCk7CiAgICAgIHZhciB0ZW1wX3Bhc19vayA9IHRoaXMudGVtcF9yb3VnZXMoKTsKCiAgICAgIHN2ZwogICAgICAuYXBwZW5kKCJnIikKICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIittYXJnZVgrIiwiKyAtbWFyZ2VZICsiKSIpCiAgICAgIC5jYWxsKGQzLmF4aXNMZWZ0KEF4ZVkpKTsKCiAgICAgIHN2ZwogICAgICAuYXBwZW5kKCJnIikKICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIisgbWFyZ2VYICsiLCIrKEhhdXRldXJfZ3JhcGhlLW1hcmdlWSkrIikiKQogICAgICAuY2FsbChkMy5heGlzQm90dG9tKEF4ZVgpKTsKCgogICAgICBzdmcuc2VsZWN0QWxsKCJncmFwaGVfcm91Z2UiKQogICAgICAgICAgICAgICAgICAuZGF0YSh0ZW1wX3Bhc19vaykKICAgICAgICAgICAgICAgICAgLmVudGVyKCkKICAgICAgICAgICAgICAgICAgLmFwcGVuZCgicmVjdCIpCiAgICAgICAgICAgICAgICAgIC5hdHRyKCJmaWxsIiwgInJlZCIpCiAgICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEhhdXRldXJfZ3JhcGhlIC0gZDsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgLmF0dHIoIngiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBFc3BhY2VtZW50X2JhcnJlczsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAuYXR0cigid2lkdGgiLCBMYXJnZXVyX2JhcnJlcyAtIEVzcGFjZW1lbnRfYmFycmVzKQogICAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSBbKExhcmdldXJfYmFycmVzICogaSkgKyBtYXJnZVgsIC1tYXJnZVldOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJ0cmFuc2xhdGUoIisgdHJhbnNsYXRlICsiKSI7CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgc3ZnLnNlbGVjdEFsbCgiZ3JhcGhlX2JsZXUiKQogICAgICAgICAgICAgICAgICAuZGF0YSh0ZW1wX29rKQogICAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgICAuYXBwZW5kKCJyZWN0IikKICAgICAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAic3RlZWxibHVlIikKICAgICAgICAgICAgICAgICAgLmF0dHIoInkiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSGF1dGV1cl9ncmFwaGUgLSBkOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAuYXR0cigieCIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEVzcGFjZW1lbnRfYmFycmVzOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIExhcmdldXJfYmFycmVzIC0gRXNwYWNlbWVudF9iYXJyZXMpCiAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IFsoTGFyZ2V1cl9iYXJyZXMgKiBpKSArIG1hcmdlWCwgLW1hcmdlWV07CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInRyYW5zbGF0ZSgiKyB0cmFuc2xhdGUgKyIpIjsKICAgICAgICAgICAgICAgICAgfSk7CgogICAgfSwKICAgIHRlbXBfYmxldWVzKCl7CiAgICB2YXIgdGFiID0gW107CiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5uYl96b25lczsgaSsrKXsKICAgICAgICBpZih0aGlzLmRhdGFbaV0gPD0gdGhpcy50ZW1wX3NldWlsc1tpXSl7CiAgICAgICAgICAgIHRhYi5wdXNoKHRoaXMuZGF0YVtpXSk7CiAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICAgIHRhYi5wdXNoKHRoaXMudGVtcF9zZXVpbHNbaV0pOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiB0YWI7CiAgICB9LAogICAgdGVtcF9yb3VnZXMoKXsKICAgICAgdmFyIHRhYiA9IFtdOwogICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5uYl96b25lczsgaSsrKXsKICAgICAgICAgIGlmKHRoaXMuZGF0YVtpXSA+IHRoaXMudGVtcF9zZXVpbHNbaV0pewogICAgICAgICAgICAgIHRhYi5wdXNoKHRoaXMuZGF0YVtpXSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlewogICAgICAgICAgICAgIHRhYi5wdXNoKDApOwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0YWI7CiAgICB9LAogICAgdXBkYXRlKCl7CiAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoInN2ZyIpOwogICAgICBzdmcuc2VsZWN0QWxsKCIqIikucmVtb3ZlKCk7CiAgICAgIHRoaXMuZGVzc2luZXJfaGlzdG9ncmFtbWUoKTsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["Graphe.vue"],"names":[],"mappings":";;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Graphe.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <svg id=\"histogramme_temp\">\n  </svg>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nexport default {\n  name: 'vue-line-chart',\n  data: () => ({\n      data: [300, 108, 280, 170, 230, 242],\n      timer: undefined,\n      nb_zones: undefined,\n      temp_seuils: [200, 200, 200, 200, 200, 200],\n      margeX: 30,\n      margeY: 20,\n      Largeur_graphe: undefined,\n      Hauteur_graphe: undefined,\n      Espacement_barres: 10,\n      Largeur_barres: undefined,\n      tab_zones: [\"Z1\", \"Z2\", \"Z3\", \"Z4\", \"Z5\", \"Z6\"],\n      // line: '',\n    }),\n  mounted() {\n    this.nb_zones = this.data.length;\n    this.Largeur_graphe = this.nb_zones*100 + this.margeX;\n    this.Hauteur_graphe = d3.max(this.temp_seuils) + 100;\n    this.Largeur_barres = this.Largeur_graphe/this.nb_zones;\n    // this.tab_zones = this.creer_tab_zones();\n    this.dessiner_histogramme();\n    this.timer = setInterval(this.changeData, 1000);\n  },\n  destroyed: function(){\n    clearInterval(this.timer);\n  },\n  watch:{\n    data: function(){\n      // console.log('a');\n      // this.createGraph();\n      this.update();\n    },\n  },\n  methods: {\n    changeData(){\n      \n      let data_to_send = [\"get_temperature\"];\n      let headers = {'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Methods': 'POST, GET, PUT, OPTIONS, DELETE',\n            'Access-Control-Allow-Headers': 'Access-Control-Allow-Methods, Access-Control-Allow-Origin, Origin, Accept, Content-Type',\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n          }\n      fetch(\"http://localhost:3000\", {\n        method: 'post',\n        headers,\n        body: JSON.stringify(data_to_send)\n\n      })\n      .then(res=> res.json())\n      .then(data => {\n        this.data = data[1].zone_chauffe;\n      });\n\n\n    },\n    dessiner_histogramme(){\n      var nb_zones = this.data.length;\n      var margeX = this.margeX;\n      var margeY = this.margeY;\n      var Largeur_graphe = nb_zones*this.Largeur_barres + margeX;\n      var Hauteur_graphe = d3.max(this.temp_seuils)*1.5 + margeY;\n      var Espacement_barres = this.Espacement_barres;\n      var Largeur_barres = (Largeur_graphe / nb_zones);\n\n      var tab_zones = this.tab_zones;\n\n      var AxeY = d3.scaleLinear()\n          .domain([Hauteur_graphe,0])\n          .range([0,Hauteur_graphe])\n\n      var AxeX = d3.scaleBand()\n          .domain(tab_zones)\n          .range([0,Largeur_graphe])\n\n      var svg = d3.select('#histogramme_temp')\n          .attr(\"width\", Largeur_graphe+margeX)\n          .attr(\"height\", Hauteur_graphe);\n\n      var temp_ok = this.temp_bleues();\n      var temp_pas_ok = this.temp_rouges();\n\n      svg\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\"+margeX+\",\"+ -margeY +\")\")\n      .call(d3.axisLeft(AxeY));\n\n      svg\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\"+ margeX +\",\"+(Hauteur_graphe-margeY)+\")\")\n      .call(d3.axisBottom(AxeX));\n\n\n      svg.selectAll(\"graphe_rouge\")\n                  .data(temp_pas_ok)\n                  .enter()\n                  .append(\"rect\")\n                  .attr(\"fill\", \"red\")\n                  .attr(\"y\", function(d) {\n                      return Hauteur_graphe - d;\n                  })\n                  .attr(\"x\", function() {\n                      return Espacement_barres;\n                  })\n                  .attr(\"height\", function(d) {\n                      return d;\n                  })\n                  .attr(\"width\", Largeur_barres - Espacement_barres)\n                  .attr(\"transform\", function (d, i) {\n                      var translate = [(Largeur_barres * i) + margeX, -margeY];\n                      return \"translate(\"+ translate +\")\";\n                  });\n\n      svg.selectAll(\"graphe_bleu\")\n                  .data(temp_ok)\n                  .enter()\n                  .append(\"rect\")\n                  .attr(\"fill\", \"steelblue\")\n                  .attr(\"y\", function(d) {\n                      return Hauteur_graphe - d;\n                  })\n                  .attr(\"x\", function() {\n                      return Espacement_barres;\n                  })\n                  .attr(\"height\", function(d) {\n                      return d;\n                  })\n                  .attr(\"width\", Largeur_barres - Espacement_barres)\n                  .attr(\"transform\", function (d, i) {\n                      var translate = [(Largeur_barres * i) + margeX, -margeY];\n                      return \"translate(\"+ translate +\")\";\n                  });\n\n    },\n    temp_bleues(){\n    var tab = [];\n    for(var i = 0; i < this.nb_zones; i++){\n        if(this.data[i] <= this.temp_seuils[i]){\n            tab.push(this.data[i]);\n        }\n        else{\n            tab.push(this.temp_seuils[i]);\n        }\n    }\n    return tab;\n    },\n    temp_rouges(){\n      var tab = [];\n      for(var i = 0; i < this.nb_zones; i++){\n          if(this.data[i] > this.temp_seuils[i]){\n              tab.push(this.data[i]);\n          }\n          else{\n              tab.push(0);\n          }\n      }\n      return tab;\n    },\n    update(){\n      var svg = d3.select(\"svg\");\n      svg.selectAll(\"*\").remove();\n      this.dessiner_histogramme();\n    }\n  },\n};\n</script>\n\n<style scoped>\n  svg{\n    margin: 25px;\n  }\n  path{\n    fill: none;\n    stroke: #76BF8A;\n    stroke-width: 3px;\n  }\n</style>\n"]}]}